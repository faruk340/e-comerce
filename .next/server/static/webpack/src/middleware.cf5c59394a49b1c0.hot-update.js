"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("src/middleware",{

/***/ "(middleware)/./src/middleware.js":
/*!***************************!*\
  !*** ./src/middleware.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var accept_language__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! accept-language */ \"(middleware)/./node_modules/accept-language/Build/Source/AcceptLanguage.js\");\n/* harmony import */ var accept_language__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(accept_language__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n/* harmony import */ var _app_i18n_settings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./app/i18n/settings */ \"(middleware)/./src/app/i18n/settings.js\");\n\n\n\naccept_language__WEBPACK_IMPORTED_MODULE_0___default().languages(_app_i18n_settings__WEBPACK_IMPORTED_MODULE_2__.languages);\nconst cookieName = \"i18next\";\nasync function middleware(request) {\n    const path = request.nextUrl.pathname;\n    let lng;\n    if (request.cookies.has(cookieName)) lng = accept_language__WEBPACK_IMPORTED_MODULE_0___default().get(request.cookies.get(cookieName).value);\n    if (!lng) lng = accept_language__WEBPACK_IMPORTED_MODULE_0___default().get(request.headers.get(\"Accept-Language\"));\n    if (!lng) lng = _app_i18n_settings__WEBPACK_IMPORTED_MODULE_2__.fallbackLng;\n    if (request.cookies.has(\"maintenance\") && path !== `/${lng}/maintenance`) {\n        let myHeaders = new Headers();\n        myHeaders.append(\"Authorization\", `Bearer ${request.cookies.get(\"uat\")?.value}`);\n        let requestOptions = {\n            method: \"GET\",\n            headers: myHeaders\n        };\n        let data = await (await fetch(\"http://localhost:3000/api/\" + \"settings\", requestOptions))?.json();\n        if (data?.values?.maintenance?.maintenance_mode && path !== `/${lng}/maintenance`) {\n            return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(new URL(`/${lng}/maintenance`, request.url));\n        } else {\n            if (request.cookies.get(\"maintenance\")) {\n                return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.next();\n            } else {\n                const response = next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.next();\n                response.cookies.delete(\"maintenance\");\n                return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(new URL(`/`, request.url));\n            }\n        }\n    }\n    if (request.headers.get(\"x-redirected\")) {\n        // Request is already redirected, skip middleware\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.next();\n    }\n    // Redirect if lng in path is not supported\n    if (!_app_i18n_settings__WEBPACK_IMPORTED_MODULE_2__.languages.some((loc)=>request.nextUrl.pathname.startsWith(`/${loc}`)) && !request.nextUrl.pathname.startsWith(\"/_next\")) {\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(new URL(`/${lng}${request.nextUrl.pathname}`, request.url));\n    }\n    if (request.headers.has(\"referer\")) {\n        const refererUrl = new URL(request.headers.get(\"referer\"));\n        const lngInReferer = _app_i18n_settings__WEBPACK_IMPORTED_MODULE_2__.languages.find((l)=>refererUrl.pathname.startsWith(`/${l}`));\n        const response = next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.next();\n        if (lngInReferer) response.cookies.set(cookieName, lngInReferer);\n        return response;\n    }\n}\nconst config = {\n    matcher: [\n        \"/((?!api|_next/static|_next/image|favicon.ico).*)\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SSxFQUFFLENBQUM7UUFFeEMsTUFBTVIsV0FBV2pDLHFEQUFZQSxDQUFDZ0MsSUFBSTtRQUNsQyxJQUFJTyxjQUFjTixTQUFTdkIsT0FBTyxDQUFDZ0MsR0FBRyxDQUFDdkMsWUFBWW9DO1FBQ25ELE9BQU9OO0lBQ1Q7QUFDRjtBQUVPLE1BQU1VLFNBQVM7SUFDcEJDLFNBQVM7UUFBQztLQUFvRDtBQUNoRSxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9taWRkbGV3YXJlLmpzP2E0OWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGFjY2VwdExhbmd1YWdlIGZyb20gXCJhY2NlcHQtbGFuZ3VhZ2VcIjtcbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuaW1wb3J0IHsgZmFsbGJhY2tMbmcsIGxhbmd1YWdlcyB9IGZyb20gXCIuL2FwcC9pMThuL3NldHRpbmdzXCI7XG5cbmFjY2VwdExhbmd1YWdlLmxhbmd1YWdlcyhsYW5ndWFnZXMpO1xuXG5jb25zdCBjb29raWVOYW1lID0gXCJpMThuZXh0XCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtaWRkbGV3YXJlKHJlcXVlc3QpIHtcbiAgY29uc3QgcGF0aCA9IHJlcXVlc3QubmV4dFVybC5wYXRobmFtZTtcbiAgbGV0IGxuZztcbiAgaWYgKHJlcXVlc3QuY29va2llcy5oYXMoY29va2llTmFtZSkpXG4gICAgbG5nID0gYWNjZXB0TGFuZ3VhZ2UuZ2V0KHJlcXVlc3QuY29va2llcy5nZXQoY29va2llTmFtZSkudmFsdWUpO1xuICBpZiAoIWxuZykgbG5nID0gYWNjZXB0TGFuZ3VhZ2UuZ2V0KHJlcXVlc3QuaGVhZGVycy5nZXQoXCJBY2NlcHQtTGFuZ3VhZ2VcIikpO1xuICBpZiAoIWxuZykgbG5nID0gZmFsbGJhY2tMbmc7XG5cbiAgaWYgKHJlcXVlc3QuY29va2llcy5oYXMoXCJtYWludGVuYW5jZVwiKSAmJiBwYXRoICE9PSBgLyR7bG5nfS9tYWludGVuYW5jZWApIHtcbiAgICBsZXQgbXlIZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcbiAgICBteUhlYWRlcnMuYXBwZW5kKFxuICAgICAgXCJBdXRob3JpemF0aW9uXCIsXG4gICAgICBgQmVhcmVyICR7cmVxdWVzdC5jb29raWVzLmdldChcInVhdFwiKT8udmFsdWV9YFxuICAgICk7XG4gICAgbGV0IHJlcXVlc3RPcHRpb25zID0ge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgaGVhZGVyczogbXlIZWFkZXJzLFxuICAgIH07XG4gICAgbGV0IGRhdGEgPSBhd2FpdCAoXG4gICAgICBhd2FpdCBmZXRjaChwcm9jZXNzLmVudi5BUElfUFJPRF9VUkwgKyBcInNldHRpbmdzXCIsIHJlcXVlc3RPcHRpb25zKVxuICAgICk/Lmpzb24oKTtcblxuICAgIGlmIChcbiAgICAgIGRhdGE/LnZhbHVlcz8ubWFpbnRlbmFuY2U/Lm1haW50ZW5hbmNlX21vZGUgJiZcbiAgICAgIHBhdGggIT09IGAvJHtsbmd9L21haW50ZW5hbmNlYFxuICAgICkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKGAvJHtsbmd9L21haW50ZW5hbmNlYCwgcmVxdWVzdC51cmwpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHJlcXVlc3QuY29va2llcy5nZXQoXCJtYWludGVuYW5jZVwiKSkge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLm5leHQoKTtcbiAgICAgICAgcmVzcG9uc2UuY29va2llcy5kZWxldGUoXCJtYWludGVuYW5jZVwiKTtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKGAvYCwgcmVxdWVzdC51cmwpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAocmVxdWVzdC5oZWFkZXJzLmdldChcIngtcmVkaXJlY3RlZFwiKSkge1xuICAgIC8vIFJlcXVlc3QgaXMgYWxyZWFkeSByZWRpcmVjdGVkLCBza2lwIG1pZGRsZXdhcmVcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoKTtcbiAgfVxuXG4gIC8vIFJlZGlyZWN0IGlmIGxuZyBpbiBwYXRoIGlzIG5vdCBzdXBwb3J0ZWRcbiAgaWYgKFxuICAgICFsYW5ndWFnZXMuc29tZSgobG9jKSA9PiByZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUuc3RhcnRzV2l0aChgLyR7bG9jfWApKSAmJlxuICAgICFyZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUuc3RhcnRzV2l0aChcIi9fbmV4dFwiKVxuICApIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KFxuICAgICAgbmV3IFVSTChgLyR7bG5nfSR7cmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lfWAsIHJlcXVlc3QudXJsKVxuICAgICk7XG4gIH1cbiAgaWYgKHJlcXVlc3QuaGVhZGVycy5oYXMoXCJyZWZlcmVyXCIpKSB7XG4gICAgY29uc3QgcmVmZXJlclVybCA9IG5ldyBVUkwocmVxdWVzdC5oZWFkZXJzLmdldChcInJlZmVyZXJcIikpO1xuICAgIGNvbnN0IGxuZ0luUmVmZXJlciA9IGxhbmd1YWdlcy5maW5kKChsKSA9PlxuICAgICAgcmVmZXJlclVybC5wYXRobmFtZS5zdGFydHNXaXRoKGAvJHtsfWApXG4gICAgKTtcbiAgICBjb25zdCByZXNwb25zZSA9IE5leHRSZXNwb25zZS5uZXh0KCk7XG4gICAgaWYgKGxuZ0luUmVmZXJlcikgcmVzcG9uc2UuY29va2llcy5zZXQoY29va2llTmFtZSwgbG5nSW5SZWZlcmVyKTtcbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgbWF0Y2hlcjogW1wiLygoPyFhcGl8X25leHQvc3RhdGljfF9uZXh0L2ltYWdlfGZhdmljb24uaWNvKS4qKVwiXSxcbn07XG4iXSwibmFtZXMiOlsiYWNjZXB0TGFuZ3VhZ2UiLCJOZXh0UmVzcG9uc2UiLCJmYWxsYmFja0xuZyIsImxhbmd1YWdlcyIsImNvb2tpZU5hbWUiLCJtaWRkbGV3YXJlIiwicmVxdWVzdCIsInBhdGgiLCJuZXh0VXJsIiwicGF0aG5hbWUiLCJsbmciLCJjb29raWVzIiwiaGFzIiwiZ2V0IiwidmFsdWUiLCJoZWFkZXJzIiwibXlIZWFkZXJzIiwiSGVhZGVycyIsImFwcGVuZCIsInJlcXVlc3RPcHRpb25zIiwibWV0aG9kIiwiZGF0YSIsImZldGNoIiwicHJvY2VzcyIsImVudiIsIkFQSV9QUk9EX1VSTCIsImpzb24iLCJ2YWx1ZXMiLCJtYWludGVuYW5jZSIsIm1haW50ZW5hbmNlX21vZGUiLCJyZWRpcmVjdCIsIlVSTCIsInVybCIsIm5leHQiLCJyZXNwb25zZSIsImRlbGV0ZSIsInNvbWUiLCJsb2MiLCJzdGFydHNXaXRoIiwicmVmZXJlclVybCIsImxuZ0luUmVmZXJlciIsImZpbmQiLCJsIiwic2V0IiwiY29uZmlnIiwibWF0Y2hlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(middleware)/./src/middleware.js\n");

/***/ })

});